
title: gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæƒå¨æŒ‡å—å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šgit addæš‚å­˜åŒºçš„ä¸‰ä¸ªçŠ¶æ€ä»¥åŠæš‚å­˜åŒºçš„ç†è§£
author: Leesin.Dong
top: 
tags:
  - Git
categories:
  - å­¦ä¹ ç¬”è®°
  - gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæƒå¨æŒ‡å—å­¦ä¹ ç¬”è®°
date: 2019-3-12 10:21:02

---


# ä¸ç»è¿‡git addï¼ˆåˆ°æš‚å­˜åŒºï¼‰ï¼Œèƒ½ç›´æ¥è¿›è¡Œcommitå—ï¼Ÿ
ä¸èƒ½ï¼Œæœ‰ä¸€ç§æ–¹æ³•ï¼Œå»ºè®®å¿˜æ‰ã€‚
## ä¸¾ä¸ªğŸŒ°

```js
âœ  demo git:(master) vi a.txt
âœ  demo git:(master) âœ— git commit -m "a"
On branch master
Changes not staged for commit:
	modified:   a.txt

no changes added to commit
âœ  demo git:(master) âœ— git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

no changes added to commit (use "git add" and/or "git commit -a")
```
ä»£ç ä¸­modified:   a.txtæ˜¯çº¢è‰²çš„ï¼Œæäº¤å¤±è´¥äº†

```js
âœ  demo git:(master) âœ— git add .
âœ  demo git:(master) âœ— git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   a.txt
âœ  demo git:(master) âœ— git commit -m "add "
[master 81b09ec] add
 1 file changed, 1 insertion(+), 1 deletion(-)
```
ä»£ç ä¸­modified:   a.txtæ˜¯ç»¿è‰²çš„ï¼Œæäº¤æˆåŠŸäº†

é€šè¿‡ä¸Šé¢çš„ä¾‹å­è¯´æ˜modified:  
 **<font color="red">  a.txtæ˜¯çº¢è‰²çš„ä»£è¡¨æ²¡æœ‰git addï¼Œæ˜¯ç»¿è‰²çš„ä»£è¡¨ï¼Œè¿›è¡Œäº†git add æ“ä½œã€‚
  </font>** 
å½“ç„¶å¯ä»¥é€šè¿‡

```js
âœ  demo git:(master) âœ— git commit -a -m â€addâ€œ
```
ä¾¿å¯ä»¥çœå»git addçš„æ“ä½œï¼Œä½†æ˜¯ **<font color="red">   ä¸å»ºè®®ï¼Œå»ºè®®ç›´æ¥å¿˜è®° </font>**ï¼Œå› ä¸ºç›´æ¥ç•¥è¿‡äº†git add æ“ä½œï¼Œå°‘äº†å¾ˆå¤šæ“ä½œçš„å¯èƒ½ï¼Œè€Œä¸”æ²¡æœ‰äº†git addçš„æ“ä½œï¼Œåƒæ“ä½œå›æº¯å°±æ— æ³•å®ç°ã€‚

```js
âœ  demo git:(master) âœ— git log
commit 81b09ecc5f2f0222ede2b474efb1d8da9b04714e (HEAD -> master)
Author: dataiyangu <32248827@qq.com>
Date:   Mon Mar 11 12:18:24 2019 +0800

    add

commit 1e20fe7563a4b4bf8a091fe6c55ca9f32786224c
Author: dataiyangu <32248827@qq.com>
Date:   Mon Mar 11 12:15:53 2019 +0800

    a

commit ed97a5e3d4ae753183e6a796625dfca1f83c1f61
Author: dataiyangu <32248827@qq.com>
Date:   Mon Mar 11 08:33:11 2019 +0800
```
é€šè¿‡git logæŸ¥çœ‹ä¸‰æ¬¡commitçš„æäº¤
# ä»€ä¹ˆæ˜¯head
å½“å‰ç‰ˆæœ¬åº“çš„æœ€åä¸€æ¬¡commitï¼Œé»˜è®¤masteråˆ†æ”¯ã€‚
# git addæš‚å­˜åŒºçš„ä¸‰ä¸ªçŠ¶æ€
## git diff

```js
âœ  demo git:(master) vi a.txt
âœ  demo git:(master) âœ— git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

no changes added to commit (use "git add" and/or "git commit -a")
âœ  demo git:(master) âœ— git diff
diff --git a/a.txt b/a.txt
index 9c3645e..d16f5ff 100644
--- a/a.txt
+++ b/a.txt
@@ -1 +1 @@
-dfasff:
+dsdf:fasff:
```
ä¿®æ”¹äº†a.txtåæ‰§è¡Œgit diffï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åœ¨æ¯”è¾ƒå·®å¼‚ã€‚
ä½œè€…è®¤ä¸ºï¼Œä¸Šæ¬¡æäº¤ä¹‹åï¼Œå½“å‰çš„å·¥ä½œåŒºæ˜¯å¹²å‡€çš„

```js
âœ  demo git:(master) git checkout .
âœ  demo git:(master) git status
On branch master
nothing to commit, working tree clean
âœ  demo git:(master) git diff
```
git checkout . æ’¤é”€äº†ä¸Šæ¬¡ä¿®æ”¹æ–‡ä»¶çš„æ“ä½œï¼Œå›å»åˆ·æ–°è‡ªå·±çš„a.txtæ–‡ä»¶ï¼Œå‘ç°åˆšæ‰åšçš„æ”¹å˜æ²¡æœ‰äº†ï¼Œç„¶åæ‰§è¡Œgit diffå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰

è¿™é‡Œè®¤ä¸ºgit diffå°±æ˜¯å·²ç»è¢«ä¿®æ”¹äº†çš„æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰è¢«åŠ åˆ°æš‚å­˜åŒºä¸­æ–‡ä»¶å†…å®¹çš„å¯¹æ¯”ã€‚
## git diff head
workspaceé‡Œé¢çš„æ–‡ä»¶å’Œç‰ˆæœ¬åº“é‡Œé¢æ˜¯ä¸€æ ·çš„ï¼Œæ‹¿å½“å‰çš„æ”¹å’Œç‰ˆæœ¬åº“é‡Œé¢æ”¹å’Œåˆšæ‰çš„workspaceå’Œå½“å‰çš„ä¿®æ”¹å¯¹æ¯”å…¶å®æ˜¯ä¸€æ ·çš„

```js
âœ  demo git:(master)  vi a.txt
âœ  demo git:(master) âœ— git diff head
dfasff:
diff --git a/a.txt b/a.txt
index 9c3645e..021fcac 100644
--- a/a.txt
+++ b/a.txt
@@ -1 +1,3 @@
 dfasff:
+
+aaa
(END)
```
headæ˜¯å½“å‰çš„ä¸€ä¸ªæ¸¸æ ‡ï¼Œä½ åˆ‡æ¢åˆ°å“ªä¸ªåˆ†æ”¯ï¼Œheadå°±æŒ‡å‘å“ªä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥å°±æ˜¯å’Œheadè¿™ä¸ªåˆ†æ”¯åšå¯¹æ¯”
è¯´å®è¯ä¸Šé¢è®²çš„æˆ‘è‡ªå·±éƒ½æ²¡æœ‰å¬æ‡‚ï¼Œä¸€ç¯‡å†™çš„ä¸é”™çš„é—®ç« ï¼šhttps://blog.csdn.net/u013485584/article/details/53303858

## git diff --cached
æš‚å­˜åŒºå’Œheadå¯¹æ¯”

| å‘½ä»¤ | ä½œç”¨ |
| ------------------ | ------------------ |
| git diff head | å·¥ä½œåŒºå’Œheadå¯¹æ¯” |
| git diff --cached | æš‚å­˜åŒºå’Œheadå¯¹æ¯” |

## git checkout .

```js
git checkout .
```
åœ¨å½“å‰çš„çŠ¶æ€ä¸‹åšäº†ä¸€äº›ä¿®æ”¹ï¼Œæƒ³å›é€€å›å»ï¼Œ **<font color="red">å‰ææ˜¯æ²¡æœ‰è¿›è¡Œgit add æ“ä½œ    </font>**

## Måœ¨ç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—ä¸åŒçš„å«ä¹‰
|ç¬¬nåˆ—|å«ä¹‰|
|-|-|
| M ç¬¬ä¸€åˆ—å­—ç¬¦å«ä¹‰ | ç‰ˆæœ¬åº“å’Œå¤„ç†ä¸­é—´çŠ¶æ€æœ‰å·®å¼‚|
| M ç¬¬äºŒåˆ—å­—ç¬¦å«ä¹‰| å·¥ä½œåŒºå’Œå½“å‰æ–‡ä»¶æœ‰å·®å¼‚|
```js
âœ  demo git:(master) âœ— vi a.txt
âœ  demo git:(master) âœ— git add .
âœ  demo git:(master) âœ— vi a.txt
âœ  demo git:(master) âœ— git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   a.txt

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

âœ  demo git:(master) âœ— git status -s
MM a.txt
âœ  demo git:(master) âœ—
```
ä¸Šè¿°ä»£ç ä¸­çš„git status ç¬¬ä¸€ä¸ªmodified:   a.txt ç»¿è‰²ï¼Œç¬¬äºŒä¸ªmodified:   a.txt çº¢è‰²
git status -s ç¬¬ä¸€åˆ—Mæ˜¯ç»¿è‰²ï¼Œç¬¬äºŒåˆ—Mæ˜¯çº¢è‰²

ä¸¤æ¬¡ä¿®æ”¹a.txtï¼Œç¬¬ä¸€æ¬¡git add ï¼Œç¬¬äºŒæ¬¡æ²¡æœ‰è¿›è¡Œgit add


åˆ©ç”¨ä¸Šé¢çš„è¿™ä¸ªç‰¹æ€§å¯ä»¥ï¼š
å¼€å‘ä»£ç å®Œäº†ä¹‹å`git add .`   ï¼Œä¹‹åå¸Œæœ›åŠ ä¸€äº›logæ—¥å¿—è¿›è¡Œtestï¼Œä½†æ˜¯ä¸å¸Œæœ›æœ€åæŠŠè¿™äº›logæ—¥å¿—çš„è¯­å¥åŠ åˆ°æœ€åçš„é¡¹ç›®ä¸­ï¼Œæ‰€ä»¥å¯ä»¥`git chckout .`    ï¼Œå°±å›é€€åˆ°äº†`git add .`å®Œäº†çš„æ—¶å€™ï¼Œå³å¾€ä»£ç ä¸­åŠ logçš„æ—¶å€™ã€‚

## git reset head a.txt

```js
âœ  demo git:(master) âœ— vi a.txt
âœ  demo git:(master) âœ— git add .
âœ  demo git:(master) âœ— git reset head a.txt
Unstaged changes after reset:
M	a.txt
âœ  demo git:(master) âœ— git st
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

no changes added to commit (use "git add" and/or "git commit -a")
âœ  demo git:(master) âœ—
âœ  demo git:(master) âœ— git checkout a.txt
âœ  demo git:(master) git st
On branch master
nothing to commit, working tree clean
âœ  demo git:(master)
```
ä¸Šé¢è¯´åˆ°å¦‚æœä»£ç æ²¡æœ‰è¢«`git add .`å¯ä»¥é€šè¿‡ `git checkout .`è¿›è¡Œå›é€€ï¼Œå°†ä¿®æ”¹çš„æ–‡ä»¶ä»workspace
å¦‚æœä»£ç å·²ç»è¢«`git add .`å¯ï¼Œå¯ä»¥é€šè¿‡`git reset head filename`å›é€€ï¼Œå°†ä¿®æ”¹çš„æ–‡ä»¶ä»ç¼“å­˜åŒºä¸­å›é€€
å®Œäº†ä¹‹åå†è¿è¡Œ`git chekcout a.txt`ï¼Œæ–‡ä»¶æœ€ç»ˆå›é€€åˆ°æ²¡æœ‰è¢«ä¿®æ”¹çš„è¿‡ç¨‹ï¼Œå°†æ–‡ä»¶ä»workspaceå›é€€


# ç†è§£æš‚å­˜åŒº
## ä¸¾ä¸ªğŸŒ°(git stashã€git stash pop)
```js
âœ  demo git:(master) vi a.txt
âœ  demo git:(master) âœ— git checkout -b b
M	a.txt
Switched to a new branch 'b'
âœ  demo git:(b) âœ— ls
a.txt
âœ  demo git:(b) âœ— git status
On branch b
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

ä¸€ä¸ªç»å¸¸çŠ¯çš„é”™è¯¯
åŠ å…¥å½“å‰åœ¨devåˆ†æ”¯ä¿®æ”¹äº†a.txtä½†æ˜¯æ²¡æœ‰`git add`ï¼Œè¿™ä¸ªæ—¶å€™checkoutåˆ°äº†masteråˆ†æ”¯ï¼Œ **<font color="red">  è¿™ä¸ªæ—¶å€™å‘ç°åœ¨masteråˆ†æ”¯ä¹Ÿæœ‰äº†a.txtï¼Œå¹¶ä¸”é‡Œé¢åšçš„æ”¹å˜ä¹Ÿè·Ÿç€è¿‡å»ï¼Œ  </font>**å¹¶ä¸”æ²¡æœ‰æäº¤ï¼Œåˆšæ‰çš„è¿™ä¸ªa.txtç°åœ¨å°±æ˜¯ä¸€ä¸ªæ¸¸ç¦»çš„çŠ¶æ€ï¼Œè°ä¹Ÿä¸å±äºè°ï¼Œå¯æ˜¯ä½ åˆä¸æƒ³æäº¤ï¼Œåˆä¸æƒ³åˆ‡æ¢ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦`git stash`è¿™ä¸ªå‘½ä»¤ï¼Œä¼šå°†å½“å‰åšçš„ä¿®æ”¹åšä¸€ä¸ªä¸´æ—¶çš„å­˜å‚¨ï¼Œå°±åƒçœ‹ç”µå½±ä¸€æ ·ï¼Œçœ‹äº†ä¸€ä¼šï¼Œå…ˆæš‚åœä¸€ä¸‹ï¼Œå»ä¸Šä¸ªå•æ‰€ï¼Œå›æ¥æ¥ç€çœ‹ã€‚

```js
âœ  demo git:(master) âœ— vi a.txt
âœ  demo git:(master) âœ— git stash
Saved working directory and index state WIP on master: 81b09ec add
âœ  demo git:(master) git co b
Switched to branch 'b'
âœ  demo git:(b) cat a.txt
dfasff:
âœ  demo git:(b) git co master
Switched to branch 'master'
âœ  demo git:(master) git stash pop
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (f56b964ed9dd46735f383a6c3c93e289cad6bb00)
âœ  demo git:(master) âœ— cat a.txt
sdaf
dasf
sdaf:
```
git stashå°±æ˜¯åœ¨å³å°†åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„æ—¶å€™ä¸æƒ³git addï¼Œä½†æ˜¯ä¸å¸Œæœ›è‡ªå·±çš„æ”¹å˜è·Ÿç€åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯ ï¼Œ**<font color="red">    æ³¨æ„:git stash åæ–‡ä»¶è¿˜æ˜¯ä¼šè·Ÿç€è¿‡å»ï¼Œä½†æ˜¯é‡Œé¢åšçš„ä¿®æ”¹æ˜¯æ²¡æœ‰è·Ÿç€è¿‡å»çš„</font>**ï¼Œè¿™ä¸ªæ—¶å€™åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œåšè‡ªå·±çš„äº‹æƒ…ï¼Œåšå®Œä¹‹åï¼Œåˆ‡æ¢å›åˆšæ‰çš„åˆ†æ”¯ï¼Œé€šè¿‡ git stash pop å°±èƒ½åˆ‡æ¢å›ï¼Œåˆ‡æ¢åˆ†æ”¯å‰æ²¡æœ‰æäº¤è€Œä¿å­˜äº†çš„é‚£ä¸ªçŠ¶æ€äº†ï¼Œå°±åƒçœ‹ç”µå½±çš„æš‚åœã€‚

## ç†è§£æš‚å­˜åŒº
åƒgit statusç­‰ä¸€äº›å…¶ä»–çš„å‘½ä»¤å°±æ˜¯é€šè¿‡æ‰«ææ–‡ä»¶æ”¹å˜çš„æ—¶é—´æˆ³é•¿åº¦ç­‰ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯å¦è¢«ä¿®æ”¹äº†ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¼ ç»Ÿçš„æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹ï¼Œè¿™æ ·è‚¯å®šæ¯”ä¼ ç»Ÿçš„æ–¹å¼é€Ÿåº¦æœ‰ä¸€å®šçš„æå‡ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190312192313400.png)
å·¦ä¾§æ˜¯å·¥ä½œåŒºï¼Œå³ä¾§æ˜¯ç‰ˆæœ¬åº“
å³ä¾§ä¸­çš„indexæ˜¯æš‚å­˜åŒºä¹Ÿå«stageï¼Œmasteræ˜¯ç›®å½•æ ‘ï¼Œobjectsæ‰€æœ‰è¢«ä¿®æ”¹çš„å¯¹è±¡

å½“å·¥ä½œåŒºçš„æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œåš`git add`å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘è¢«æ›´æ–°äº†ï¼Œæ‰€æœ‰è¢«`git add`çš„æ–‡ä»¶éƒ½ä¼šè¢«å†™å…¥åˆ°objectå¯¹è±¡åº“ä¸­ï¼Œè¿™æ—¶å€™å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªæ¸¸ç¦»çš„å¯¹è±¡ï¼Œä¸èƒ½ç¡®å®šæ˜¯å±äºindexè¿˜æ˜¯masterï¼Œå› ä¸ºæ²¡æœ‰è¢«æäº¤æ‰€ä»¥ä¸æ˜¯éš¶å±äºmasterï¼Œä¹Ÿä¸ä¸€å®šä¼šåœ¨indexä¸­ï¼Œå› ä¸ºå¯èƒ½ä¼šè¢«æ’¤é”€ï¼Œå½“æ‰§è¡Œæäº¤çš„æ—¶å€™ï¼Œæš‚å­˜åŒºä¸­çš„ç›®å½•æ ‘ä¼šè¢«å†™å…¥åˆ°å¯¹è±¡åº“ä¸­ï¼Œmasteråˆ†æ”¯ä¼šåšä¸€ä¸ªç›¸åº”çš„æ›´æ–°ï¼Œmasteræœ€æ–°çš„ç›®å½•æ ‘å°±ä¼šæŒ‡å‘æš‚å­˜åŒºé‡Œé¢çš„ç›®å½•æ ‘ã€‚

å¦‚æœå·²ç»åŠ å…¥äº†æš‚å­˜åŒºä¸­ï¼Œä½†æ˜¯ä¸æƒ³è¦è¿™ä¸ªä¿®æ”¹ï¼Œå¯ä»¥æ‰§è¡Œ`git reset head filename`å‘½ä»¤ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šè¢«é‡å†™ï¼Œé‡å†™çš„ä¾æ®ä¼šè¢«masteråˆ†æ”¯çš„ç›®å½•æ‰€æ›¿æ¢ï¼Œè¿™ä¸ªæ—¶å€™å·¥ä½œåŒºå¹¶ä¸å—å½±å“ï¼ŒåŒ…æ‹¬   ` git rm --cached file`ä¼šå°†æ–‡ä»¶ä»æš‚å­˜åŒºé‡Œé¢åˆ é™¤æ‰ï¼Œåˆ é™¤çš„æ—¶å€™åªæ˜¯åœ¨æš‚å­˜åŒºä¸­åˆ çš„ï¼Œå¹¶æ²¡æœ‰å°†å·¥ä½œåŒºçš„æ–‡ä»¶åˆ æ‰ã€‚