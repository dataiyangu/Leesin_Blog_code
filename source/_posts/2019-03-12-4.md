
title: gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæƒå¨æŒ‡å—å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šgit reset
author: Leesin.Dong
top: 
tags:
  - Git
categories:
  - å­¦ä¹ ç¬”è®°
  - gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæƒå¨æŒ‡å—å­¦ä¹ ç¬”è®°
date: 2019-3-12 10:21:04

---

## git resetç›®å½•æ ‘é‡å†™
git reset --soft æš‚å­˜åŒºå·¥ä½œåŒºä¸å˜
git reset --hard
git reset file bane

å¦‚æœä¿®æ”¹æŸä¸€ä¸ªæ–‡ä»¶ï¼ˆæ²¡æœ‰`git add`ï¼Œå·²è¢«æäº¤è¿‡ï¼‰ï¼Œæƒ³æ’¤é”€è¿™æ¬¡ä¿®æ”¹ï¼ˆç¡®å®šæ²¡ä»»ä½•ç”¨å¤„ï¼‰ï¼Ÿ

```js
git checkout a.txt æˆ–è€… /src/ (æ’¤é”€æŸä¸ªæ–‡ä»¶ä¸‹çš„æ‰€æœ‰)
```

å¦‚æœä¿®æ”¹æŸä¸€ä¸ªæ–‡ä»¶ï¼ˆ`git add`å·²åœ¨æš‚å­˜åŒºï¼‰ï¼Œæƒ³æ’¤é”€è¿™æ¬¡ä¿®æ”¹ï¼ˆç¡®å®šæ²¡ä»»ä½•ç”¨å¤„ï¼‰ï¼Ÿï¼Œæ‰§è¡Œå®Œä¸‹é¢çš„å‘½ä»¤å°±ä¼šå›åˆ°ä¸Šé¢çš„å“ªä¸ªçŠ¶æ€

```js
git reset a.txt
```
 **<font color="red">  æ³¨æ„å¦‚æœä¸æŒ‡å®šresetçš„è·¯å¾„çš„è¯ï¼Œå°±ä¼šæŠŠæ‰€æœ‰åœ¨æš‚å­˜åŒºçš„éƒ½æ’¤é”€
  </font>**

å¦‚æœå·²ä¿®æ”¹æŸå‡ ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯æƒ³æ’¤é”€åˆ°æŸä¸ªcommitæäº¤ä¹‹å‰ï¼Œä½†æ˜¯å½“å‰æš‚å­˜åŒºã€å·¥ä½œåŒºä¸æƒ³æ’¤é”€ï¼Ÿ

```js
git reset --soft commitId
//HEAD^æœ€è¿‘ä¸€æ¬¡çš„
git reset --soft HEAD^
```
ğŸŒ°
```js
//è¿™ä¸ªğŸŒ°ï¼šåŸæ–‡ï¼šhttps://blog.csdn.net/flysqrlboy/article/details/79250150 
git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)
    modified:   a.txt
    modified:   b.txt
$ git log --oneline
c80c16c (HEAD -> master) modify a.txt b.txt
7dd2e09 add two files a.txt b.txt
e6e0035 1.oneline 2.second line
$ git reset --soft HEAD^
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)
    modified:   a.txt
    modified:   b.txt
$ git log --oneline
7dd2e09 (HEAD -> master) add two files a.txt b.txt
e6e0035 1.oneline 2.second line
```

å¦‚æœä¿®æ”¹äº†æŸä¸ªæ–‡ä»¶ä¹Ÿæäº¤æš‚å­˜åŒºäº†ï¼Œæƒ³æ’¤é”€åˆ°æŸä¸ªcommitï¼ˆç¡®å®šéƒ½ä¸è¦äº†ï¼‰ï¼Œå…¶å®è¿˜å¯ä»¥æ‰¾å›ï¼ï¼ï¼é‚£åº”è¯¥å¦‚ä½•æ‰¾å›å‘¢ï¼Ÿçœ‹ä¸‹å°èŠ‚

```js
git reset --hard commitId
```

## git reset é‡ç½®
git reflog
git reflog show master | head 5

```js
//é€šè¿‡hardï¼ˆç²—é²çš„ï¼‰åˆ‡æ¢åˆ°å…¶ä»–çš„commitï¼ˆé‡Œé¢æ–‡ä»¶è¢«ä¿®æ”¹çš„å†…å®¹å›é€€äº†ï¼‰
âœ  demo git:(master) âœ— git reset --hard  81b09ecc5f2f0222ede2b474efb1d8da9b04714
HEAD is now at 81b09ec add
//é€šè¿‡è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹å¯ä»¥åˆ‡æ¢çš„commit
âœ  demo git:(master) git reflog 
81b09ec (HEAD -> master, b) HEAD@{0}: reset: moving to 81b09ecc5f2f0222ede2b474efb1d8da9b04714
50bceb7 HEAD@{1}: commit: a
81b09ec (HEAD -> master, b) HEAD@{2}: checkout: moving from b to master
81b09ec (HEAD -> master, b) HEAD@{3}: checkout: moving from master to b
81b09ec (HEAD -> master, b) HEAD@{4}: reset: moving to HEAD
81b09ec (HEAD -> master, b) HEAD@{5}: checkout: moving from b to master
81b09ec (HEAD -> master, b) HEAD@{6}: checkout: moving from master to b
81b09ec (HEAD -> master, b) HEAD@{7}: checkout: moving from b to master
81b09ec (HEAD -> master, b) HEAD@{8}: checkout: moving from master to b
81b09ec (HEAD -> master, b) HEAD@{9}: checkout: moving from b to master
81b09ec (HEAD -> master, b) HEAD@{10}: checkout: moving from master to b
81b09ec (HEAD -> master, b) HEAD@{11}: reset: moving to HEAD
81b09ec (HEAD -> master, b) HEAD@{12}: checkout: moving from b to master
81b09ec (HEAD -> master, b) HEAD@{13}: reset: moving to HEAD
81b09ec (HEAD -> master, b) HEAD@{14}: checkout: moving from master to b
81b09ec (HEAD -> master, b) HEAD@{15}: commit: add
1e20fe7 HEAD@{16}: commit: a
ed97a5e HEAD@{17}: commit (initial): my once
//æŸ¥çœ‹masteråˆ†æ”¯å¯ä»¥åˆ‡æ¢çš„commit
âœ  demo git:(master) git reflog show master
81b09ec (HEAD -> master, b) master@{0}: reset: moving to 81b09ecc5f2f0222ede2b474efb1d8da9b04714
50bceb7 master@{1}: commit: a
81b09ec (HEAD -> master, b) master@{2}: commit: add
1e20fe7 master@{3}: commit: a
ed97a5e master@{4}: commit (initial): my once
//ç²—é²çš„åˆ‡æ¢å›å»ï¼Œåç¼€æ˜¯ä¸Šé¢å‘½ä»¤ä¸­ï¼ˆgit reflogï¼‰å¾—åˆ°çš„ï¼Œæ³¨æ„é‡Œé¢è¢«ä¿®æ”¹çš„å†…å®¹è¢«å›é€€äº†
âœ  demo git:(master) git reset --hard master@{3}
HEAD is now at 1e20fe7 a
```
 **<font color="red">   åˆ‡æ¢å›å»åï¼Œæ³¨æ„é‡Œé¢è¢«ä¿®æ”¹çš„å†…å®¹è¢«å›é€€äº† </font>**
